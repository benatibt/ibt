/* =================================================
   Islands Book Trust – Front-end stylesheet
   Purpose: minimal structural helpers only.
   Keep colours, typography and hover effects in theme.json.
   ================================================= */

/* ===== Islands Book Trust – Header (v1.3 debug) ===== */

/* 1) Strong gradient (debug) so it's unmistakable */
.ibt-header-wrap{
  /* STICKY (primary) */
  position: sticky;
  top: 0;
  z-index: 1000;

  /* DEBUG GRADIENT: 50% grey → white */
  background-image: linear-gradient(180deg, #808080 0%, #FFFFFF 100%);
  border-bottom: 1px solid #e5e5e5;
}

/* Some WP setups wrap the header; ensure the sticky applies on the direct child too */
.wp-site-blocks > .wp-block-group.ibt-header-wrap{
  position: sticky;
  top: 0;
  z-index: 1000;
}

/* 2) Main nav row: ensure full width so the hamburger can push right */
.ibt-header-col > .wp-block-navigation{
  min-height: 58px;
  display: flex;
  align-items: center;
  width: 100%;
  padding: 0 .75rem;
}

/* 3) Move the hamburger (toggle) to the right on narrow screens */
.wp-block-navigation__responsive-container-open{
  margin-left: auto;
}

/* Utility row spacing/centering */
.ibt-utility-row{
  min-height: 36px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 .75rem;
}

/* Button-style nav links (robust selectors) */
.wp-block-navigation .wp-block-navigation__container > li > a,
.wp-block-navigation .wp-block-navigation-item__content{
  background: var(--wp--preset--color--accent);
  color: var(--wp--preset--color--background);
  border-radius: .4rem;
  padding: .4rem .8rem;
  text-decoration: none;
  line-height: 1.25;
}
.wp-block-navigation a:hover,
.wp-block-navigation .wp-block-navigation-item__content:hover,
.wp-block-navigation a:focus-visible{
  background: var(--wp--preset--color--accent-hover);
}

/* Tighten button gaps */
.wp-block-navigation .wp-block-navigation__container{ gap: .5rem; }

/* Logo column alignment */
.ibt-logo-col{ display: flex; align-items: center; justify-content: center; }

/* ---- TEMPORARY FALLBACK (use ONLY if sticky still fails) ---- */

.ibt-header-wrap{ position: fixed !important; left: 0; right: 0; top: 0; }
body{ padding-top: 110px; }  /* approx 36 + 58 + padding
*/



/* =================================================
   Design tokens (custom)
   Edit once to change for this css file
   ================================================= */
:root {
  --ibt-outline-soft-fill: #fffdf5;   /* outline button hover/focus fill */
  --ibt-underline-thickness: 3px;     /* header link/icon underline thickness */
}

/* --------------------------------------------
   Base reset
   -------------------------------------------- */

/* Ensure blocks align flush with viewport */
body {
    margin: 0;
}

/* Use border-box sizing everywhere to make
   width/height calculations predictable */
html {
    box-sizing: border-box;
}
*, *::before, *::after {
    box-sizing: inherit;
}

/* Safety net: apply root gutters from theme.json on the front-end */
:where(.wp-site-blocks) {
  padding-left:  var(--wp--style--root--padding-left, clamp(1rem, 4vw, 3rem));
  padding-right: var(--wp--style--root--padding-right, clamp(1rem, 4vw, 3rem));
  box-sizing: border-box;
}

/* --------------------------------------------
   Media defaults
   -------------------------------------------- */

/* Media & Text: add modest inner padding on the text pane */
.wp-block-media-text .wp-block-media-text__content {
  /* left & right padding so either orientation feels balanced */
  padding: 0 var(--wp--preset--spacing--m);
}

/* Prevent images or video from overflowing
   their container and keep aspect ratio */
img,
svg,
video {
    max-width: 100%;
    height: auto;
}

/* Remove default figure margins so WordPress
   block gap settings control spacing */
figure {
    margin: 0;
}

/* Quote: no left rule; keep it as an indented, italic paragraph */
.wp-block-quote {
  border: 0;
  border-left: none;
  box-shadow: none; /* belt & braces if a theme adds an inset rule */
}


/* --------------------------------------------
   Accessibility helpers
   -------------------------------------------- */

/* Visually hidden but screen-reader accessible text */
.screen-reader-text {
    position: absolute !important;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(1px, 1px, 1px, 1px);
    white-space: nowrap;
    border: 0;
}

/* When focused (e.g. skip link), reveal the text */
.screen-reader-text:focus {
    clip: auto;
    width: auto;
    height: auto;
    margin: 0;
    padding: 0.5rem 1rem;
    position: static;
    background: #fff; /* purely for readability */
}

/* Headings: real underline, thin + tight (robust across engines) */
h1 a, h2 a, h3 a, h4 a, h5 a, h6 a,
.wp-block-heading a {
  border-bottom: 0 !important;                 /* kill any legacy border underline */
  text-decoration-line: underline !important;  /* use longhand, not shorthand */
  text-decoration-color: currentColor;         /* follows link color */
  text-decoration-thickness: 1px !important;   /* thin at rest */
  text-underline-offset: 0.12em !important;    /* tight to glyphs */
}

h1 a:is(:hover, :focus-visible),
h2 a:is(:hover, :focus-visible),
h3 a:is(:hover, :focus-visible),
h4 a:is(:hover, :focus-visible),
h5 a:is(:hover, :focus-visible),
h6 a:is(:hover, :focus-visible),
.wp-block-heading a:is(:hover, :focus-visible) {
  text-decoration-thickness: 3px !important;   /* thicker on hover/focus */
}

/* Smooth transitions for textual links (exclude real buttons) */
a:not(.wp-element-button):not(.wp-block-button__link):not(.button):not(.wc-block-components-button):not(.wc-block-mini-cart__button) {
  transition: color 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease, text-decoration-color 0.3s ease;
}

/* --------------------------------------------
   Core Button states (solid + outline with soft hover fill)
   -------------------------------------------- */

/* Map each button to brand tokens */
.wp-block-button > .wp-block-button__link {
  --btn-bg: var(--wp--preset--color--primary);
  --btn-hover: var(--wp--preset--color--primary-hover);
  transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
}

/* Accent variants override the tokens */
.wp-block-button.is-style-solid-accent > .wp-block-button__link,
.wp-block-button.is-style-outline-accent > .wp-block-button__link {
  --btn-bg: var(--wp--preset--color--accent);
  --btn-hover: var(--wp--preset--color--accent-hover);
}

/* Solid Accent — ensure green base (JSON sets primary for default) */
.wp-block-button.is-style-solid-accent > .wp-block-button__link {
  background-color: var(--btn-bg);
  border-color: var(--btn-bg);
  color: #fff;
}

/* SOLID (Default + Solid Accent): darken to brand hover token */
.wp-block-button:not(.is-style-outline) > .wp-block-button__link:hover,
.wp-block-button:not(.is-style-outline) > .wp-block-button__link:focus-visible {
  background-color: var(--btn-hover);
  border-color: var(--btn-hover);
  color: #fff;
  box-shadow: 0 0 0 2px var(--btn-hover);
}

/* OUTLINE base: always transparent */
.wp-block-button.is-style-outline > .wp-block-button__link,
.wp-block-button.is-style-outline-accent > .wp-block-button__link {
  background-color: transparent;
  color: var(--btn-bg);
  border-color: var(--btn-bg);
}

/* OUTLINE hover/focus: soft cream fill + darker brand for border/text */
.wp-block-button.is-style-outline > .wp-block-button__link:hover,
.wp-block-button.is-style-outline > .wp-block-button__link:focus-visible,
.wp-block-button.is-style-outline-accent > .wp-block-button__link:hover,
.wp-block-button.is-style-outline-accent > .wp-block-button__link:focus-visible {
  background-color: var(--ibt-outline-soft-fill);
  color: var(--btn-hover);
  border-color: var(--btn-hover);
  box-shadow: 0 0 0 2px var(--btn-hover);
}

/* =====================================================
   Header interactivity — nav links, site title, mobile toggles, Woo icons
   - Nav & submenu: brand navy on hover/focus + underline cue
   - Site title: underline cue (color handled via theme.json)
   - Mobile toggles (hamburger/close): brand navy + underline cue
   - Woo account/cart: brand navy + underline cue; tint SVGs
   ===================================================== */

/* Ease on mobile menu toggles (they are buttons, not anchors) */
.wp-block-navigation.is-responsive
  .wp-block-navigation__responsive-container-open,
.wp-block-navigation.is-responsive
  .wp-block-navigation__responsive-container-close {
  transition: color 0.3s ease, box-shadow 0.3s ease;
}

/* Smooth SVG tint on mobile toggles */
.wp-block-navigation.is-responsive
  .wp-block-navigation__responsive-container-open svg,
.wp-block-navigation.is-responsive
  .wp-block-navigation__responsive-container-open svg *,
.wp-block-navigation.is-responsive
  .wp-block-navigation__responsive-container-close svg,
.wp-block-navigation.is-responsive
  .wp-block-navigation__responsive-container-close svg * {
  transition: fill 0.3s ease, stroke 0.3s ease;
}

/* Ease on Woo account/cart header actions (links & mini-cart button) */
:where(.wp-block-woocommerce-customer-account, .wc-block-customer-account, .wp-block-woocommerce-mini-cart, .wc-block-mini-cart)
  :is(a, button, .wc-block-mini-cart__button) {
  transition: color 0.3s ease, box-shadow 0.3s ease;
}

/* Smooth SVG tint on Woo account/cart icons */
:where(.wp-block-woocommerce-customer-account, .wc-block-customer-account, .wp-block-woocommerce-mini-cart, .wc-block-mini-cart)
  :is(a, button, .wc-block-mini-cart__button) svg,
:where(.wp-block-woocommerce-customer-account, .wc-block-customer-account, .wp-block-woocommerce-mini-cart, .wc-block-mini-cart)
  :is(a, button, .wc-block-mini-cart__button) svg * {
  transition: fill 0.3s ease, stroke 0.3s ease;
}

/* Nav + submenu — color + underline */
.wp-block-navigation .wp-block-navigation-item__content:is(:hover, :focus-visible),
.wp-block-navigation .wp-block-navigation__submenu-container a:is(:hover, :focus-visible) {
  color: var(--wp--preset--color--primary) !important;
  box-shadow: inset 0 calc(var(--ibt-underline-thickness) * -1) currentColor;
}

/* Site title — underline cue only (color comes from theme.json) */
.wp-block-site-title a:is(:hover, :focus-visible) {
  box-shadow: inset 0 calc(var(--ibt-underline-thickness) * -1) currentColor;
}

/* Mobile menu toggles (hamburger/close) — color + underline */
.wp-block-navigation.is-responsive
  .wp-block-navigation__responsive-container-open:is(:hover, :focus-visible),
.wp-block-navigation.is-responsive
  .wp-block-navigation__responsive-container-close:is(:hover, :focus-visible) {
  color: var(--wp--preset--color--primary) !important;
  box-shadow: inset 0 calc(var(--ibt-underline-thickness) * -1) currentColor !important;
}
/* Toggle SVGs follow currentColor while hovered/focused */
.wp-block-navigation.is-responsive
  .wp-block-navigation__responsive-container-open:is(:hover, :focus-visible) svg,
.wp-block-navigation.is-responsive
  .wp-block-navigation__responsive-container-open:is(:hover, :focus-visible) svg *,
.wp-block-navigation.is-responsive
  .wp-block-navigation__responsive-container-close:is(:hover, :focus-visible) svg,
.wp-block-navigation.is-responsive
  .wp-block-navigation__responsive-container-close:is(:hover, :focus-visible) svg * {
  fill: currentColor !important;
  stroke: currentColor !important;
}

/* Account & Cart (Woo) — brand color on hover/focus
   Underline only on the link/button, not the SVG icon */
:where(.wp-block-woocommerce-customer-account, .wc-block-customer-account) a:is(:hover, :focus-visible),
:where(.wp-block-woocommerce-mini-cart, .wc-block-mini-cart) :is(a, button, .wc-block-mini-cart__button):is(:hover, :focus-visible) {
  color: var(--wp--preset--color--primary) !important;
  box-shadow: inset 0 calc(var(--ibt-underline-thickness) * -1) currentColor !important;
}

/* Ensure SVGs inherit the color while hovered/focused (link or mini-cart btn) */
:where(.wp-block-woocommerce-customer-account, .wc-block-customer-account) a:is(:hover, :focus-visible) svg,
:where(.wp-block-woocommerce-customer-account, .wc-block-customer-account) a:is(:hover, :focus-visible) svg *,
:where(.wp-block-woocommerce-mini-cart, .wc-block-mini-cart) :is(a, button, .wc-block-mini-cart__button):is(:hover, :focus-visible) svg,
:where(.wp-block-woocommerce-mini-cart, .wc-block-mini-cart) :is(a, button, .wc-block-mini-cart__button):is(:hover, :focus-visible) svg * {
  fill: currentColor !important;
  stroke: currentColor !important;
}

/* =====================================================
   WooCommerce – Mini-cart footer + checkout + single product
   ===================================================== */

/* Primary (solid) buttons – checkout, add to basket, place order, cart submit, classic Woo, product review submit */
.wc-block-mini-cart__footer-actions
    .wc-block-components-button:not(.outlined),
.wc-block-mini-cart__shopping-button,
.single_add_to_cart_button.button.alt,
.wc-block-components-checkout-place-order-button.contained,
.wc-block-cart__submit-button.contained,
.woocommerce a.button,
.woocommerce button.button,
.woocommerce input.button,
/* product reviews submit (classic comments form) */
.woocommerce #review_form #respond .form-submit input[type="submit"],
.woocommerce #review_form #respond .form-submit input.submit,
.woocommerce #review_form #respond .form-submit .submit,
/* ADDED: core-style add-to-cart links that aren't inside .wp-block-button */
a.add_to_cart_button.wp-element_button,
a.wp-block-button__link.add_to_cart_button {
    background-color: var(--wp--preset--color--primary);
    color: #fff;
    border: 2px solid var(--wp--preset--color--primary);
    font-family: var(--wp--preset--font-family--title-font);
    font-weight: 700;
    border-radius: 12px;
    padding: 0.75rem 1.5rem;
    transition: background-color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
}


.wc-block-mini-cart__footer-actions
    .wc-block-components-button:not(.outlined):hover,
.wc-block-mini-cart__footer-actions
    .wc-block-components-button:not(.outlined):focus-visible,
.wc-block-mini-cart__shopping-button:hover,
.wc-block-mini-cart__shopping-button:focus-visible,
.single_add_to_cart_button.button.alt:hover,
.single_add_to_cart_button.button.alt:focus-visible,
.wc-block-components-checkout-place-order-button.contained:hover,
.wc-block-components-checkout-place-order-button.contained:focus-visible,
.wc-block-cart__submit-button.contained:hover,
.wc-block-cart__submit-button.contained:focus-visible,
.woocommerce a.button:hover,
.woocommerce a.button:focus-visible,
.woocommerce button.button:hover,
.woocommerce button.button:focus-visible,
.woocommerce input.button:hover,
.woocommerce input.button:focus-visible,
.woocommerce #review_form #respond .form-submit input[type="submit"]:hover,
.woocommerce #review_form #respond .form-submit input[type="submit"]:focus-visible,
.woocommerce #review_form #respond .form-submit input.submit:hover,
.woocommerce #review_form #respond .form-submit input.submit:focus-visible,
.woocommerce #review_form #respond .form-submit .submit:hover,
.woocommerce #review_form #respond .form-submit .submit:focus-visible,
/* ADDED */
a.add_to_cart_button.wp-element-button:hover,
a.add_to_cart_button.wp-element-button:focus-visible,
a.wp-block-button__link.add_to_cart_button:hover,
a.wp-block-button__link.add_to_cart_button:focus-visible {
    background-color: var(--wp--preset--color--primary-hover);
    border-color: var(--wp--preset--color--primary-hover);
    box-shadow: 0 0 0 2px var(--wp--preset--color--primary-hover);
}


/* Disabled / busy states — keep contrast, suppress interactivity */
/* Solid/primary targets */
.wc-block-mini-cart__footer-actions .wc-block-components-button:not(.outlined)[disabled],
.wc-block-mini-cart__footer-actions .wc-block-components-button:not(.outlined)[aria-disabled="true"],
.wc-block-mini-cart__shopping-button[disabled],
.wc-block-mini-cart__shopping-button[aria-disabled="true"],
.single_add_to_cart_button.button.alt[disabled],
.single_add_to_cart_button.button.alt.disabled,
.single_add_to_cart_button.button.alt.loading,
.wc-block-components-checkout-place-order-button.contained[disabled],
.wc-block-components-checkout-place-order-button.contained.is-busy,
.wc-block-cart__submit-button.contained[disabled],
.wc-block-cart__submit-button.contained.is-busy,
.woocommerce a.button.disabled,
.woocommerce button.button:disabled,
.woocommerce input.button:disabled,
.woocommerce #review_form #respond .form-submit .wp-element-button:disabled {
    background-color: var(--wp--preset--color--primary);
    border-color: var(--wp--preset--color--primary);
    color: #fff;
    box-shadow: none;
    cursor: not-allowed;
    pointer-events: none;
    transition: none;
}

/* Outline/secondary targets */
.wc-block-mini-cart__footer-actions .wc-block-components-button.outlined[disabled],
.wc-block-mini-cart__footer-actions .wc-block-components-button.outlined[aria-disabled="true"],
.wc-block-mini-cart__footer-actions .wc-block-components-button.outlined.is-busy,
.wc-block-cart__coupon .wc-block-components-button[disabled],
.wc-block-cart__coupon .wc-block-components-button[aria-disabled="true"],
/* Apply coupon (Checkout Totals) */
.wc-block-components-totals-coupon__button[disabled],
.wc-block-components-totals-coupon__button[aria-disabled="true"],
.woocommerce .woocommerce-message .button.disabled,
.woocommerce .woocommerce-info .button.disabled,
.woocommerce .woocommerce-error .button.disabled,
.woocommerce a.button.wc-backward.disabled {
    color: var(--wp--preset--color--primary);
    border-color: var(--wp--preset--color--primary);
    background-color: transparent;
    box-shadow: none;
    cursor: not-allowed;
    pointer-events: none;
    transition: none;
}

/* Secondary (outline) button – “View my basket”, “Apply coupon”, notice actions, return-to-shop */
.wc-block-mini-cart__footer-actions
    .wc-block-components-button.outlined,
/* Apply coupon (Cart Block) — cover button and link variants */
.wc-block-cart__coupon .wc-block-components-button,
.wc-block-cart__coupon .wp-element-button,
.wc-block-cart__submit-coupon,
/* Apply coupon (Checkout Totals) */
.wc-block-components-totals-coupon__button,
.woocommerce .woocommerce-message .button,
.woocommerce .woocommerce-info .button,
.woocommerce .woocommerce-error .button,
.woocommerce a.button.wc-backward {
    background-color: transparent;
    color: var(--wp--preset--color--primary);
    border: 2px solid var(--wp--preset--color--primary);
    font-family: var(--wp--preset--font-family--title-font);
    font-weight: 600;
    border-radius: 12px;
    padding: 0.75rem 1.5rem;
    transition: color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
}

.wc-block-mini-cart__footer-actions
    .wc-block-components-button.outlined:hover,
.wc-block-mini-cart__footer-actions
    .wc-block-components-button.outlined:focus-visible,
/* Apply coupon (Cart Block) — cover button and link variants */
.wc-block-cart__coupon .wc-block-components-button:hover,
.wc-block-cart__coupon .wc-block-components-button:focus-visible,
.wc-block-cart__coupon .wp-element-button:hover,
.wc-block-cart__coupon .wp-element-button:focus-visible,
.wc-block-cart__submit-coupon:hover,
.wc-block-cart__submit-coupon:focus-visible,
/* Apply coupon (Checkout Totals) */
.wc-block-components-totals-coupon__button:hover,
.wc-block-components-totals-coupon__button:focus-visible,
.woocommerce .woocommerce-message .button:hover,
.woocommerce .woocommerce-message .button:focus-visible,
.woocommerce .woocommerce-info .button:hover,
.woocommerce .woocommerce-info .button:focus-visible,
.woocommerce .woocommerce-error .button:hover,
.woocommerce .woocommerce-error .button:focus-visible,
.woocommerce a.button.wc-backward:hover,
.woocommerce a.button.wc-backward:focus-visible {
    color: var(--wp--preset--color--primary-hover);
    border-color: var(--wp--preset--color--primary-hover);
    background-color: var(--ibt-outline-soft-fill); /* soft “sunlight” fill */
    box-shadow: 0 0 0 2px var(--wp--preset--color--primary-hover);
}

/* Payment provider buttons — quarantine theme button styles
   (lets provider / plugin CSS win; doesn’t affect normal Woo buttons) */
:where(
  /* Stripe / WooPayments (Apple/Google Pay) */
  .stripe-payment-request-button,
  .wcpay-payment-request-button,
  .apple-pay-button,
  .gpay-button,
  .google-pay-button,
  /* PayPal */
  .paypal-buttons,
  .paypal-button,
  /* Klarna */
  .klarna-payments__button,
  /* WC Blocks express checkout containers/buttons */
  .wc-block-components-express-checkout button,
  .wc-block-components-express-checkout .wp-element-button
) {
  background-color: revert !important;
  color: revert !important;
  border: revert !important;
  box-shadow: revert !important;
  border-radius: revert !important;
  font-family: revert !important;
  font-weight: revert !important;
  padding: revert !important;
  transition: revert !important;
}
/* End of WooCommerce styling */

/* Respect users who prefer minimal motion */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    transition-duration: 0s !important;
    animation-duration: 0s !important;
  }
}

/* =========================================
   Media queries
   --bp-stack: 37.5rem  (≈600px)
   --bp-tablet: 48rem   (≈768px)
   ========================================= */
@media (max-width: 37.5rem) { /* ~600px */
  .wp-block-media-text.is-stacked-on-mobile .wp-block-media-text__content {
    /* top, left/right, bottom — keep L/R padding when stacked */
    padding: var(--wp--preset--spacing--xs) var(--wp--preset--spacing--m) 0;
  }
}



/* At/above breakpoint: hide hamburger; show inline list */
@media (min-width: 62.001rem) {
  .wp-block-navigation.is-responsive .wp-block-navigation__responsive-container-open,
  .wp-block-navigation.is-responsive .wp-block-navigation__responsive-container-close {
    display: none !important;
  }
  /* Ensure the inline list is visible in desktop mode */
  .wp-block-navigation.is-responsive .wp-block-navigation__container {
    display: flex !important;
  }
}

/* =================================================
   End of minimal stylesheet
   ================================================= */
